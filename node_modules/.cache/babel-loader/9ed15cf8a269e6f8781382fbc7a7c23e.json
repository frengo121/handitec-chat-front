{"ast":null,"code":"import _toConsumableArray from\"/Users/fduque/Documents/Applications/Projects/handytec-chat-react-nodejs/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/fduque/Documents/Applications/Projects/handytec-chat-react-nodejs/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Col}from'styled-bootstrap-grid';import Layout from'../../layouts';import io from'socket.io-client';import Config from'../../config';import{WrapperChat,StyledContainer,StyledCol,StyledRow}from'./style';// import logo from '../../assets/images/logo.svg'\nvar socket=io(Config.api);var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];useEffect(function(){socket.on('message',function(message){console.log('nuevo mensaje de event',message);retrieveNewMessages(message);});},[]);var retrieveNewMessages=function retrieveNewMessages(message){setMessages(function(oldArray){return[].concat(_toConsumableArray(oldArray),[message]);});};var handleSubmit=function handleSubmit(event){var body=event.target.value;if(event.keyCode==13&&body){var message={body:body,from:'me'};setMessages([].concat(_toConsumableArray(messages),[message]));socket.emit('message',body);event.target.value='';}};console.log('messages',messages);return/*#__PURE__*/React.createElement(Layout,{className:\"App\"},/*#__PURE__*/React.createElement(StyledContainer,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Inserta message\",onKeyUp:handleSubmit}))),/*#__PURE__*/React.createElement(StyledRow,null,/*#__PURE__*/React.createElement(StyledCol,{lg:8,lgOffset:2},/*#__PURE__*/React.createElement(WrapperChat,null,messages.map(function(message,index){return/*#__PURE__*/React.createElement(\"p\",{key:index},message.from,\": \",message.body);}))))));};export default Home;","map":{"version":3,"sources":["/Users/fduque/Documents/Applications/Projects/handytec-chat-react-nodejs/front/src/views/Home/index.jsx"],"names":["React","useState","useEffect","Row","Col","Layout","io","Config","WrapperChat","StyledContainer","StyledCol","StyledRow","socket","api","Home","messages","setMessages","on","message","console","log","retrieveNewMessages","oldArray","handleSubmit","event","body","target","value","keyCode","from","emit","map","index"],"mappings":"kZAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CAEA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CAEA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA,OAASC,WAAT,CAAsBC,eAAtB,CAAuCC,SAAvC,CAAkDC,SAAlD,KAAmE,SAAnE,CAEA;AACA,GAAMC,CAAAA,MAAM,CAAGN,EAAE,CAACC,MAAM,CAACM,GAAR,CAAjB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,eACeb,QAAQ,CAAC,EAAD,CADvB,wCACVc,QADU,eACAC,WADA,eAGjBd,SAAS,CAAC,UAAM,CACdU,MAAM,CAACK,EAAP,CAAU,SAAV,CAAqB,SAACC,OAAD,CAAa,CAChCC,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCF,OAAtC,EACAG,mBAAmB,CAACH,OAAD,CAAnB,CACD,CAHD,EAID,CALQ,CAKN,EALM,CAAT,CAOA,GAAMG,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACH,OAAD,CAAa,CACvCF,WAAW,CAAC,SAACM,QAAD,qCAAkBA,QAAlB,GAA4BJ,OAA5B,IAAD,CAAX,CACD,CAFD,CAIA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9B,GAAMC,CAAAA,IAAI,CAAGD,KAAK,CAACE,MAAN,CAAaC,KAA1B,CACA,GAAIH,KAAK,CAACI,OAAN,EAAiB,EAAjB,EAAuBH,IAA3B,CAAiC,CAC/B,GAAMP,CAAAA,OAAO,CAAG,CACdO,IAAI,CAAJA,IADc,CAEdI,IAAI,CAAE,IAFQ,CAAhB,CAIAb,WAAW,8BAAKD,QAAL,GAAeG,OAAf,GAAX,CACAN,MAAM,CAACkB,IAAP,CAAY,SAAZ,CAAuBL,IAAvB,EACAD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAqB,EAArB,CACD,CACF,CAXD,CAaAR,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBL,QAAxB,EAEA,mBACE,oBAAC,MAAD,EAAQ,SAAS,CAAC,KAAlB,eACE,oBAAC,eAAD,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,mBACE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,iBAFd,CAGE,OAAO,CAAEQ,YAHX,EADF,CADF,CADF,cAUE,oBAAC,SAAD,mBACE,oBAAC,SAAD,EAAW,EAAE,CAAE,CAAf,CAAkB,QAAQ,CAAE,CAA5B,eACE,oBAAC,WAAD,MACGR,QAAQ,CAACgB,GAAT,CAAa,SAACb,OAAD,CAAUc,KAAV,CAAoB,CAChC,mBACE,yBAAG,GAAG,CAAEA,KAAR,EACGd,OAAO,CAACW,IADX,MACmBX,OAAO,CAACO,IAD3B,CADF,CAKD,CANA,CADH,CADF,CADF,CAVF,CADF,CADF,CA4BD,CAzDD,CA2DA,cAAeX,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Row, Col } from 'styled-bootstrap-grid'\nimport Layout from '../../layouts'\n\nimport io from 'socket.io-client'\n\nimport Config from '../../config'\n\nimport { WrapperChat, StyledContainer, StyledCol, StyledRow } from './style'\n\n// import logo from '../../assets/images/logo.svg'\nconst socket = io(Config.api)\n\nconst Home = () => {\n  const [messages, setMessages] = useState([])\n\n  useEffect(() => {\n    socket.on('message', (message) => {\n      console.log('nuevo mensaje de event', message)\n      retrieveNewMessages(message)\n    })\n  }, [])\n\n  const retrieveNewMessages = (message) => {\n    setMessages((oldArray) => [...oldArray, message])\n  }\n\n  const handleSubmit = (event) => {\n    const body = event.target.value\n    if (event.keyCode == 13 && body) {\n      const message = {\n        body,\n        from: 'me',\n      }\n      setMessages([...messages, message])\n      socket.emit('message', body)\n      event.target.value = ''\n    }\n  }\n\n  console.log('messages', messages)\n\n  return (\n    <Layout className=\"App\">\n      <StyledContainer>\n        <Row>\n          <Col>\n            <input\n              type=\"text\"\n              placeholder=\"Inserta message\"\n              onKeyUp={handleSubmit}\n            />\n          </Col>\n        </Row>\n        <StyledRow>\n          <StyledCol lg={8} lgOffset={2}>\n            <WrapperChat>\n              {messages.map((message, index) => {\n                return (\n                  <p key={index}>\n                    {message.from}: {message.body}\n                  </p>\n                )\n              })}\n            </WrapperChat>\n          </StyledCol>\n        </StyledRow>\n      </StyledContainer>\n    </Layout>\n  )\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}